<section class="cpc-sections" aria-labelledby="cpc-title">
  <header class="page-head container-max">
    <h1 id="cpc-title">CPC Sections</h1>
    <div class="tools">
      <label class="search" aria-label="Search CPC">
        <i class="fa-solid fa-magnifying-glass" aria-hidden="true"></i>
        <input
          #qref
          type="text"
          placeholder="Search section, order/rule, or tag…  (Press / to focus)"
          [value]="q"
          (input)="onSearch($event)"
          (focus)="bindSearchRef(qref)"
        />
      </label>
<!-- Filter chips: mobile-friendly scroller -->
<div class="chip-scroller" role="tablist" aria-label="Quick filters">
  <button
    *ngFor="let c of chips"
    class="chip"
    type="button"
    (click)="onChipClick(c)"
  >
    {{ c }}
  </button>
</div>

    </div>
  </header>

  <div *ngIf="loading" class="grid container-max">
    <div class="card skel" *ngFor="let i of [1,2,3,4,5,6,7,8]"></div>
  </div>

  <div *ngIf="!loading && view.length" class="grid container-max" role="list">
    <a *ngFor="let s of view" class="card law-card" role="listitem" [routerLink]="['/cpc/section', s.id, s.slug]">
      <span class="stripe" aria-hidden="true"></span>
      <div class="meta">
        <div class="badge-num">{{ s.number }}</div>
        <h3 class="title">{{ s.title }}</h3>
        <div class="chapter" title="{{ s.chapter }}">{{ s.chapter }}</div>
      </div>
      <div class="props">
        <span class="prop">Civil</span>
        <span class="prop" *ngIf="s.tags?.length">#{{ s.tags[0] }}</span>
      </div>
    </a>
  </div>

  <div *ngIf="!loading && !view.length" class="empty container-max">
    <div class="empty-card">
      <h3>No CPC results</h3>
      <p>Try a different term like “jurisdiction”, “appeal”, or “decree”.</p>
    </div>
  </div>
</section>
