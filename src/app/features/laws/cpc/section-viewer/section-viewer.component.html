<section class="viewer">
  <div class="hero brand-gradient">
    <div class="container-max hero-inner">
      <div class="crumbs"><a routerLink="/cpc/sections">CPC</a> · <span>{{number}}</span></div>
      <h1 class="title h-hero">{{title}}</h1>
      <p class="subtitle">Civil Procedure Code — Nyayabharat</p>
      <div class="tools"><button class="chip" (click)="print()"><i class="fa-solid fa-print"></i> Print</button></div>
    </div>
    <div class="hero-waves"></div>
  </div>

  <div class="container-max content-wrap">
    <nav id="tabs" class="tabs" role="tablist" aria-label="Section tabs">
      <button role="tab" [class.active]="tab==='overview'"   (click)="setTab('overview')">Overview</button>
      <button role="tab" [class.active]="tab==='relief'"     (click)="setTab('relief')">Relief</button>
      <button role="tab" [class.active]="tab==='procedure'"  (click)="setTab('procedure')">Procedure</button>
      <button role="tab" [class.active]="tab==='examples'"   (click)="setTab('examples')">Examples</button>
      <button role="tab" [class.active]="tab==='judgments'"  (click)="setTab('judgments')">Judgments</button>
      <button role="tab" [class.active]="tab==='related'"    (click)="setTab('related')">Related</button>
    </nav>

    <div class="panel" *ngIf="tab==='overview'">
      <article class="card"><h2 class="h-1">Overview</h2><p class="lead">{{body}}</p></article>
    </div>

    <div class="panel" *ngIf="tab==='relief'">
      <article class="card">
        <h2 class="h-1">Relief / Remedies</h2>
        <p *ngIf="relief?.summary">{{relief?.summary}}</p>
        <ul *ngIf="relief?.remedies?.length" class="bullets"><li *ngFor="let r of relief?.remedies">{{r}}</li></ul>
        <div *ngIf="isLoading.relief" class="loading">Loading…</div>
      </article>
    </div>

    <div class="panel" *ngIf="tab==='procedure'">
      <article class="card">
        <h2 class="h-1">Procedure</h2>
        <ol *ngIf="procedure?.steps?.length" class="steps"><li *ngFor="let s of procedure?.steps">{{s}}</li></ol>
        <ul *ngIf="procedure?.notes?.length" class="notes"><li *ngFor="let n of procedure?.notes">{{n}}</li></ul>
        <div *ngIf="isLoading.procedure" class="loading">Loading…</div>
      </article>
    </div>

    <div class="panel" *ngIf="tab==='examples'">
      <article class="card">
        <h2 class="h-1">Examples</h2>
        <div class="examples">
          <div class="ex" *ngFor="let e of examples">
            <div class="ex-title"><i class="fa-regular fa-lightbulb"></i> {{e.title}}</div>
            <div class="ex-facts">{{e.facts}}</div>
            <div class="ex-outcome" *ngIf="e.outcome"><strong>Outcome:</strong> {{e.outcome}}</div>
          </div>
        </div>
        <div *ngIf="isLoading.examples" class="loading">Loading…</div>
      </article>
    </div>

    <div class="panel" *ngIf="tab==='judgments'">
      <article class="card">
        <h2 class="h-1">Key Judgments</h2>
        <div class="judgments">
          <div class="judg" *ngFor="let j of judgments">
            <div class="row1">
              <span class="court" [class.sc]="j.court==='SC'" [class.hc]="j.court==='HC'">{{j.court}}</span>
              <span class="name">{{j.caseName}}</span>
              <span class="year">{{j.year}}</span>
            </div>
            <div class="row2"><span class="cite">{{j.citation}}</span><span class="sum" *ngIf="j.summary">— {{j.summary}}</span></div>
          </div>
        </div>
        <div *ngIf="isLoading.judgments" class="loading">Loading…</div>
      </article>
    </div>

    <div class="panel" *ngIf="tab==='related'">
      <article class="card">
        <h2 class="h-1">Related</h2>
        <div class="chips"><a class="chip link" *ngFor="let r of related" [routerLink]="buildLink(r)">{{r?.number}} — {{r?.title}}</a></div>
        <div *ngIf="isLoading.related" class="loading">Loading…</div>
      </article>
    </div>
  </div>
</section>
